var baseUrl="https://api.solitics.com",$solitics={transactions:{},configSetting:{},solitics_configuration:{brand:"",memberId:"",email:"",popuptoken:"",hashedSubscriberId:"",heartbeatEnabled:""},isLogin:!1,onlineApiDetails:{loginUrl:baseUrl+"/rest/integrations/login",url:baseUrl+"/rest/integrations/transaction",optinUrl:baseUrl+"/rest/optin/systemMessage",popupUrl:baseUrl+"/rest/promotions/registerNonCustomUserEventWithContentId",startSession:baseUrl+"/rest/integrations/anonymous/startSession"},socketDetails:{url:"wss://wss.solitics.com:8082",popup:{},ws:{},isConnecting:!1},idleSetting:{idleTimeout:18e5,lastTransaction:null},pingSetting:{milliseconds:45e3},intervalSetting:{milliseconds:3e4,attempts:6,enabled:!1},popupModals:{modal:null,modal_content:null,iframe:null,iframedoc:null,closeButton:null},modal_msg:{},init:function(t){$solitics_init(t)},init_popup:function(t){$solitics_init_popup(t)},startAnonymousSession:function(t,o,i,s){solitics_startAnonymousSession(t,o,i,s)},onLoginSuccess:function(t,o,i,s){$solitics_onLogInSuccess(t,o,i,s)},loginSuccess:function(t){$solitics_onLogInSuccessWithObject(t)},onLogout:function(t){$solitics_onLogout(t)},emitWithTransactionId:function(t,o,i,s){$solitics_emit_withId(t,o,i,s)},emit:function(t,o,i){$solitics_emit(t,o,i)},onPageEnter:function(t,o){$solitics_onPageEnter(t,o)},onPageLeave:function(t,o){$solitics_onPageLeave(t,o)},onClick:function(t,o){$solitics_onClick(t,o)},optinToPromotion:function(t,o,i){$solitics_optinToPromotion(t,o,i)},hidePopup:function(){$solitics_hidePopup()},setPreDisplayPopup:function(t){$solitics_setPreDisplayPopup(t)},cancelCurrentPopup:function(){$solitics_cancelCurrentPopup()}},TRANSACTIONS_QUEUE_NAME="solitics_transaction",SOLITICS_CONFIGURATION="solitics_configuration",isMobile={KindleSilk:function(){return navigator.userAgent.match(/Silk/i)},Kindle:function(){return navigator.userAgent.match(/Kindle/i)},Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return isMobile.KindleSilk()||isMobile.Kindle()||isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Opera()||isMobile.Windows()}};function sendConnectRequest(t){return new Promise(((o,i)=>{const s=new XMLHttpRequest;s.open("POST",$solitics.onlineApiDetails.startSession,!0),s.setRequestHeader("Content-Type","application/json;charset=UTF-8"),s.onreadystatechange=function(){if(4===s.readyState){const t=200===s.status,e={isSuccess:t,responseText:s.responseText};t?o(e):i(e)}},s.send(JSON.stringify(t))}))}function getUserDevice(){var t=!1;return screen.width<800&&(t=!0),screen.height<800&&(t=!0),isMobile.any()?"mobile":t?"tablet":"desktop"}function $solitics_init(t){var o=localStorage.SOLITICS_CONFIGURATION;$solitics.solitics_configuration=o?JSON.parse(o):{brand:"",memberId:"",email:"",popuptoken:""},$solitics.solitics_configuration.brand=t,localStorage.SOLITICS_CONFIGURATION=JSON.stringify($solitics.solitics_configuration)}function $solitics_init_popup(t){var o=localStorage.SOLITICS_CONFIGURATION;$solitics.solitics_configuration=o?JSON.parse(o):{brand:"",memberId:"",email:"",popuptoken:""},$solitics.solitics_configuration.popuptoken=t,localStorage.SOLITICS_CONFIGURATION=JSON.stringify($solitics.solitics_configuration),$solitics_openWebSocket()}function anonymousMessage(t){return"Anonymous::startSession - "+t}function $solitics_getAnonymousConfig(t,o,i){return localStorage.hasOwnProperty("SOLITICS_ANONYMOUS")||(localStorage.SOLITICS_ANONYMOUS=JSON.stringify({token:t,anonymousUserIds:o,customFields:i})),JSON.parse(localStorage.SOLITICS_ANONYMOUS||"{}")}function ifReadyForAnonymousLogin(t,o,i){return new Promise(((s,e)=>{t||e(anonymousMessage("Missing token"));const l=$solitics_getAnonymousConfig(t,o,i);if(l.memberId)e(anonymousMessage("User already did login after anonymous"));else{const n=JSON.parse(localStorage.SOLITICS_CONFIGURATION||"{}");if(n.hashedSubscriberId&&n.popuptoken)e(anonymousMessage("User already did login"));else if(l.wasSuccessfullyStartedAnonymousSession)s(anonymousMessage("Anonymous session has been started already"));else{const e=guid();sendConnectRequest({token:t,anonymousUserIds:o,customFields:i,transactionId:e}).then((()=>{l.wasSuccessfullyStartedAnonymousSession=!0,localStorage.SOLITICS_ANONYMOUS=JSON.stringify(l),s(anonymousMessage("anonymous session was successfully started"))}))}}}))}function doAnonymousLoginEachTime(t,o,i){return new Promise(((s,e)=>{t||e(anonymousMessage("Missing token")),$solitics_getAnonymousConfig(t,o,i);const l=guid();sendConnectRequest({token:t,anonymousUserIds:o,customFields:i,transactionId:l}).then((()=>{s(anonymousMessage("anonymous session was successfully started"))}))}))}function solitics_startAnonymousSession(t,o,i,s){if(JSON.parse(localStorage.SOLITICS_ANONYMOUS||"{}").hashedSubscriberId)return;const e=i||{uniqueAnonymousId:guid()};doAnonymousLoginEachTime(o,e,s).then((()=>{const i=JSON.parse(localStorage.SOLITICS_ANONYMOUS||"{}");if(Object.keys(i.anonymousUserIds).length){const s=Object.keys(i.anonymousUserIds)[0];$solitics_onLogInSuccessWithObject({keyValue:i.anonymousUserIds[s],keyType:s,email:null,brand:o,popupToken:t})}}))}function $solitics_onInit(){document.querySelector("#solitics-popup-maker")||setTimeout((function(){$solitics_createPopupHTML(),$solitics_initModal(),$solitics.popupModals.closeButton.addEventListener("click",toggleModal),window.addEventListener("click",windowOnClick),$solitics.popupModals.iframe.addEventListener("load",soliticsOnLoadIframe),$solitics_clearPopupContent()}),500)}function $solitics_initModal(){$solitics.popupModals.modal=document.querySelector("#solitics-popup-maker.solitics-modal"),$solitics.popupModals.modal_content=document.querySelector("#solitics-popup-maker .solitics-modal-content"),$solitics.popupModals.iframe=document.querySelector("#solitics-iframe-popup"),$solitics.popupModals.closeButton=document.querySelector(".solitics-close-button"),$solitics.popupModals.iframe.addEventListener("load",soliticsOnLoadIframe),$solitics.popupModals.closeButton.addEventListener("click",toggleModal)}function $solitics_onLogInSuccess(t,o,i,s){var e,l=localStorage.SOLITICS_CONFIGURATION;l&&($solitics.solitics_configuration=JSON.parse(l)),i&&($solitics.solitics_configuration.brand=i),$solitics.solitics_configuration.memberId=t,$solitics.solitics_configuration.email=o,localStorage.SOLITICS_CONFIGURATION=JSON.stringify($solitics.solitics_configuration),o&&$solitics.socketDetails.ws.readyState===$solitics.socketDetails.ws.OPEN&&$solitics.socketDetails.ws.close&&($solitics.socketDetails.ws.close(),$solitics.socketDetails.isConnecting=!1),s&&$solitics_init_popup(s),e="string"==typeof $solitics.solitics_configuration.customFields?JSON.parse($solitics.solitics_configuration.customFields):$solitics.solitics_configuration.customFields;var n=location.host+location.pathname,c=location.href;e||(e={}),e.page=n,c&&(e.fullUrl=c),$solitics_beforeTransaction("LOGIN",e)}function $solitics_onLogInSuccessWithObject(t){if(t){var o=turnKeysToLower(t),i=localStorage.SOLITICS_CONFIGURATION;i&&($solitics.solitics_configuration=JSON.parse(i)),o.brand&&($solitics.solitics_configuration.brand=o.brand),$solitics.solitics_configuration.memberId=o.memberid,$solitics.solitics_configuration.email=o.email,$solitics.solitics_configuration.branch=o.branch,$solitics.solitics_configuration.keyType=o.keytype,$solitics.solitics_configuration.keyValue=o.keyvalue,$solitics.solitics_configuration.customFields=o.customfields,localStorage.SOLITICS_CONFIGURATION=JSON.stringify($solitics.solitics_configuration),$solitics_onLogInSuccess(o.memberid,o.email,o.brand,o.popuptoken)}}function turnKeysToLower(t){for(var o,i=Object.keys(t),s=i.length,e={};s--;)e[(o=i[s]).toLowerCase()]=t[o];return e}function $solitics_onLogout(t){var o;(o="string"==typeof t?JSON.parse(t):t)||(o={}),$solitics_beforeTransaction("LOGOUT",o),$solitics.solitics_configuration.heartbeatEnabled&&$soliticsHeartbit&&$soliticsHeartbit.closeHeartbit(),$solitics.isLogin=!1,delete localStorage.SOLITICS_CONFIGURATION,delete localStorage.TRANSACTIONS_QUEUE_NAME,localStorage.removeItem("SOLITICS_CONFIGURATION"),localStorage.removeItem("TRANSACTIONS_QUEUE_NAME"),$solitics.solitics_configuration={brand:"",memberId:"",email:"",popuptoken:"",hashedSubscriberId:"",heartbeatEnabled:""},localStorage.SOLITICS_CONFIGURATION=JSON.stringify($solitics.solitics_configuration),$solitics.socketDetails.ws&&$solitics.socketDetails.ws.close&&($solitics.socketDetails.ws.close(),$solitics.socketDetails.isConnecting=!1)}function $solitics_createPopupHTML(){var t=document.getElementById("solitics-popup-maker");t&&t.remove();var o=document.createElement("style");o.type="text/css",o.innerHTML="#solitics-popup-maker { position: fixed; left: 0; top: 0; width: 100%; height: 100%; opacity: 0; display:none; visibility: hidden; transform: scale(1.1); transition: visibility 0s linear 0.25s, opacity 0.25s 0s, transform 0.25s; } #solitics-popup-maker.solitics-modal { background-color: rgba(0, 0, 0, 0.6); z-index:999999; } #solitics-popup-maker .solitics-modal-content { position: absolute; top: 55%; left: 50%; transform: translate(-50%, -50%); min-width: 10rem; width: auto; height: auto; max-height: 75%; } #solitics-popup-maker.solitics-modal-xsm .solitics-modal-content { width: 30%; /*height: 30%;*/ } #solitics-popup-maker.solitics-modal .solitics-modal-content.right{ right: 0px; left: auto; transform: translate(0, -50%);} #solitics-popup-maker.solitics-modal .solitics-modal-content.left{ left: 0px; right: auto; transform: translate(0, -50%); } #solitics-popup-maker.solitics-modal .solitics-modal-content.top-right{ top: 0px; right: 0px; left: auto;transform: translate(0%, 0%); } #solitics-popup-maker.solitics-modal .solitics-modal-content.top-left{ top: 0px; left: 0px; right: auto; transform: translate(0%, 0%);  } #solitics-popup-maker.solitics-modal .solitics-modal-content.bottom-right{ bottom: 0px; right: 0px; left: auto; top: auto; transform: translate(0%, 0%); } #solitics-popup-maker.solitics-modal .solitics-modal-content.bottom-left{ bottom: 0px; left: 0px; right: auto; top: auto; transform: translate(0%, 0%);} #solitics-popup-maker.solitics-modal-xsm .solitics-modal-content.left{ left: 16%; } #solitics-popup-maker.solitics-modal-xsm .solitics-modal-content.right{ left: 83%; } #solitics-popup-maker.solitics-modal-xsm .solitics-modal-content.top-right{ right: 83%; top: 19%; } #solitics-popup-maker.solitics-modal-xsm .solitics-modal-content.top-left{ left: 16%; top: 19%; } #solitics-popup-maker.solitics-modal-xsm .solitics-modal-content.bottom-right{ left: 83%; top: 85%; } #solitics-popup-maker.solitics-modal-xsm .solitics-modal-content.bottom-left{ left: 16%; top: 85%; } #solitics-popup-maker.solitics-modal-sm .solitics-modal-content { width: 45%; /*height: 45%;*/ } #solitics-popup-maker.solitics-modal-sm .solitics-modal-content.left{ left: 23%; } #solitics-popup-maker.solitics-modal-sm .solitics-modal-content.right{ left: 75%; } #solitics-popup-maker.solitics-modal-sm .solitics-modal-content.top-right{ left: 75%; top: 26%; } #solitics-popup-maker.solitics-modal-sm .solitics-modal-content.top-left{ left: 23%; top: 26%; } #solitics-popup-maker.solitics-modal-sm .solitics-modal-content.bottom-right{ left: 75%; top: 77%; } #solitics-popup-maker.solitics-modal-sm .solitics-modal-content.bottom-left{ left: 23%; top: 77%; } #solitics-popup-maker.solitics-modal-md .solitics-modal-content { width: 70%; /*height: 70%;*/ } #solitics-popup-maker.solitics-modal-md .solitics-modal-content.left{ left: 35%; } #solitics-popup-maker.solitics-modal-md .solitics-modal-content.right{ left: 63%; } #solitics-popup-maker.solitics-modal-md .solitics-modal-content.top-right{ left: 63%; top: 38%; } #solitics-popup-maker.solitics-modal-md .solitics-modal-content.top-left{ left: 35%; top: 38%; } #solitics-popup-maker.solitics-modal-md .solitics-modal-content.bottom-right{ left: 63%; top: 65%; } #solitics-popup-maker.solitics-modal-md .solitics-modal-content.bottom-left{ left: 35%; top: 65%; } #solitics-popup-maker.solitics-modal-lg .solitics-modal-content { width: 90%; /*height: 90%;*/ } #solitics-popup-maker.solitics-modal-lg .solitics-modal-content.left{ left: 45%; } #solitics-popup-maker.solitics-modal-lg .solitics-modal-content.right{ left: 53%; } #solitics-popup-maker.solitics-modal-lg .solitics-modal-content.top-right{ left: 53%; top: 48%; } #solitics-popup-maker.solitics-modal-lg .solitics-modal-content.top-left{ left: 45%; top: 48%; } #solitics-popup-maker.solitics-modal-lg .solitics-modal-content.bottom-right{ left: 53%; top: 54%; } #solitics-popup-maker.solitics-modal-lg .solitics-modal-content.bottom-left{ left: 45%; top: 54%; } #solitics-popup-maker #solitics-modal-body.solitics-modal-msg{ /*height: 100%;*/ } #solitics-popup-maker .solitics-close-button { float: right; line-height: 1.4rem; text-align: center; cursor: pointer; border-radius: 0.25rem; margin-top: -18px; margin-right: -26px; border-radius: 56%; color: #fff; width: 25px;height: 25px;font-size: 20px; position: absolute; right: 0px; top: -6px;} #solitics-popup-maker .solitics-close-button:hover { background-color: darkgray; } #solitics-popup-maker.solitics-show-modal { opacity: 1; visibility: visible; transform: scale(1.0); transition: visibility 0s linear 0s, opacity 0.25s 0s, transform 0.25s; display: block; } #solitics-popup-maker .solitics-iframe-content{ width: 100%; height: 100%; border: none; } ",document.getElementsByTagName("head")[0].appendChild(o);var i=document.createElement("div");i.setAttribute("id","solitics-popup-maker"),i.classList.add("solitics-modal"),i.style.cssText="",document.body.appendChild(i);var s=document.createElement("div");s.classList.add("solitics-modal-content"),s.style.cssText="",i.appendChild(s);var e=document.createElement("div");e.classList.add("solitics-close-button"),e.innerHTML="&times;",s.appendChild(e);var l=document.createElement("div");l.setAttribute("id","solitics-modal-body"),l.classList.add("solitics-modal-msg"),s.appendChild(l),$solitics.modal_msg=l;var n=document.createElement("iframe");n.setAttribute("id","solitics-iframe-popup"),n.setAttribute("name","solitics-iframe-popup"),n.classList.add("solitics-iframe-content"),l.appendChild(n)}function $solitics_send(t){$solitics.socketDetails.ws.readyState===$solitics.socketDetails.ws.OPEN&&$solitics.socketDetails.ws.send(t)}function $solitics_send_ping(){$solitics_send(JSON.stringify({requestType:"ping"}))}function $solitics_intervalPing(){var t=setInterval((function(){$solitics_isNotIdle()?$solitics_send_ping():clearInterval(t)}),$solitics.pingSetting.milliseconds)}function renderIframeHeight(){var t=1,o=0,i=setInterval((function(){20==t&&(clearInterval(i),0==o&&renderIframe(!0)),$solitics.popupModals.iframedoc=$solitics.popupModals.iframe&&$solitics.popupModals.iframe.contentDocument||$solitics.popupModals.iframe.contentWindow&&$solitics.popupModals.iframe.contentWindow.document;var s=getDocHeight($solitics.popupModals.iframedoc);o=s,$solitics.popupModals.iframe.style.height=s+"px",$solitics.popupModals.iframe.parentElement.style.height=s+"px",$solitics.popupModals.iframe.style.transition="all 0.3s ease-in-out",t++,"0px"==$solitics.popupModals.iframe.style.height&&($solitics.popupModals.iframe.style.height="75vh"),$solitics.socketDetails.popup.theme&&!$solitics.socketDetails.popup.theme.blockOtherActivityOnDisplay&&updatePositionAsNotification()}),100)}function setSocketHandlers(){$solitics.socketDetails.ws.onopen=function(){var t={requestType:"connect",credentials:{token:$solitics.solitics_configuration.popuptoken,memberId:$solitics.solitics_configuration.memberId,hashedSubscriberId:$solitics.solitics_configuration.hashedSubscriberId}};$solitics_send(JSON.stringify(t)),$solitics_intervalPing()},$solitics.socketDetails.ws.onmessage=function(t){$solitics.socketDetails.popup=JSON.parse(t.data),callPreDisplayPopup(),renderIframe(),renderIframeHeight()},$solitics.socketDetails.ws.onclose=function(t){},$solitics.socketDetails.ws.onerror=function(t){}}function $solitics_isNotIdle(){return!$solitics.idleSetting.lastTransaction||new Date-$solitics.idleSetting.lastTransaction<$solitics.idleSetting.idleTimeout}function $solitics_reconnectSocket(){$solitics.socketDetails.isConnecting=!1,$solitics_isNotIdle()&&setTimeout((function(){$solitics_openWebSocket()}),5e3)}function $solitics_openWebSocket(t){if($solitics_onInit(),"WebSocket"in window){const l=localStorage.SOLITICS_CONFIGURATION;l&&($solitics.solitics_configuration=JSON.parse(l));var o=!!$solitics.socketDetails.ws,i=$solitics.socketDetails.ws.readyState===$solitics.socketDetails.ws.CLOSED,s=$solitics.solitics_configuration.popuptoken&&$solitics.solitics_configuration.hashedSubscriberId,e=$solitics_isNotIdle();if(o&&i&&s&&!$solitics.socketDetails.isConnecting&&(e||t))try{$solitics.socketDetails.ws=new WebSocket($solitics.socketDetails.url),$solitics.socketDetails.isConnecting=!0,setSocketHandlers()}catch(t){console.log(t),$solitics.socketDetails.isConnecting=!1}}}function isCancelCurrentPopup(){return void 0!==$solitics.configSetting.isCancelCurrentPopup&&$solitics.configSetting.isCancelCurrentPopup}function callPreDisplayPopup(){if($solitics.configSetting.callback&&"function"==typeof $solitics.configSetting.callback){var t={};t.memberId=$solitics.solitics_configuration.memberId||$solitics.solitics_configuration.keyValue,t.html=$solitics.socketDetails.popup.html,t.sentParams=localStorage.SOLITICS_CONFIGURATION,$solitics.configSetting.callback(t)}}function renderIframe(t){var o=isCancelCurrentPopup();$solitics.socketDetails.popup.html&&!o&&(t||sendMetric("delivered"),$solitics_clearPopupContent(),$solitics_createPopupHTML(),$solitics_initModal(),$solitics_createPopup(),$solitics.popupModals.modal&&!$solitics.popupModals.modal.classList.contains("solitics-show-modal")&&toggleModal(t)),o&&($solitics.configSetting.isCancelCurrentPopup=!1)}function soliticsOnLoadIframe(){var t=this.contentDocument||this.contentWindow.document;if(aTags=t.getElementsByTagName("a"),aTags&&aTags.length>0)for(var o=0;o<aTags.length;o++)aTags[o].addEventListener("click",(function(t){onPopupClickEvt(this,"aTags click Detected!",t)}),!1);if(buttonTags=t.getElementsByTagName("button"),buttonTags&&buttonTags.length>0)for(o=0;o<buttonTags.length;o++)buttonTags[o].addEventListener("click",(function(t){onPopupClickEvt(this,"buttonTags click Detected!",t)}),!1);if(imgTags=t.getElementsByTagName("img"),imgTags&&imgTags.length>0)for(o=0;o<imgTags.length;o++)imgTags[o].addEventListener("click",(function(t){onPopupClickEvt(this,"imgTags click Detected!",t)}),!1);if(bgImageElements=t.querySelectorAll('*[style*="background-image"]'),bgImageElements&&bgImageElements.length>0)for(o=0;o<bgImageElements.length;o++)bgImageElements[o].addEventListener("click",(function(t){onPopupClickEvt(this,"bgImageElements click Detected!",t)}),!1)}function onPopupClickEvt(t,o,i){i&&i.stopPropagation(),console.log(o);t.getAttribute("id"),t.getAttribute("name"),t.getAttribute("class");$solitics_clickPopup()}function sendMetric(t){var o={requestType:"metric",messageId:$solitics.socketDetails.popup.id,metric:t};$solitics_send(JSON.stringify(o))}function windowOnClick(t){t.target,$solitics.popupModals.modal}function toggleModal(t){$solitics.popupModals.modal.classList.toggle("solitics-show-modal"),$solitics.popupModals.modal.classList.contains("solitics-show-modal")?t||sendMetric("open"):sendMetric("closed")}function getDocHeight(t){var o,i=(t=t||document).body,s=t.documentElement;return i&&(o=Math.max(i.clientHeight,i.scrollHeight,i.offsetHeight,s.clientHeight,s.scrollHeight,s.offsetHeight)),o}function $solitics_clearPopupContent(){$solitics.popupModals.iframedoc=$solitics.popupModals.iframe&&$solitics.popupModals.iframe.contentDocument||$solitics.popupModals.iframe&&$solitics.popupModals.iframe.contentWindow&&$solitics.popupModals.iframe.contentWindow.document,$solitics.popupModals.iframedoc&&$solitics.popupModals.iframedoc.body&&($solitics.popupModals.iframedoc.body.innerHTML=""),$solitics.popupModals.iframe&&($solitics.popupModals.iframe.srcdoc="");$solitics.popupModals.iframedoc&&($solitics.popupModals.iframedoc.open(),$solitics.popupModals.iframedoc.write(""),$solitics.popupModals.iframedoc.close()),$solitics.popupModals.modal&&$solitics.popupModals.modal.classList&&$solitics.popupModals.modal.classList.contains("solitics-show-modal")&&$solitics.popupModals.modal.classList.remove("solitics-show-modal")}function $solitics_createPopup(){initPopupSetting(),$solitics.popupModals.iframedoc=$solitics.popupModals.iframe&&$solitics.popupModals.iframe.contentDocument||$solitics.popupModals.iframe&&$solitics.popupModals.iframe.contentWindow&&$solitics.popupModals.iframe.contentWindow.document;var t=$solitics.socketDetails.popup.html;if($solitics.popupModals.iframedoc){if($solitics.popupModals.iframedoc.open(),$solitics.popupModals.iframedoc.write(t),$solitics.popupModals.iframedoc.close(),$solitics.popupModals.iframedoc.body){var o=getDocHeight($solitics.popupModals.iframedoc);$solitics.popupModals.iframe.style.height=o+"px",$solitics.popupModals.iframe.parentElement.style.height=o+"px",$solitics.popupModals.iframe.style.maxHeight="75vh",0==o&&renderIframeHeight(),$solitics.socketDetails.popup.theme&&!$solitics.socketDetails.popup.theme.blockOtherActivityOnDisplay&&updatePositionAsNotification()}var i=document.createElement("style");i.type="text/css",i.innerHTML="body { overflow-x: hidden; text-align: center; } body::-webkit-scrollbar-track { border-radius: 10px; margin:7px 0; background-color: rgba(27, 30, 50, 0.15); } body::-webkit-scrollbar { width: 5px; background-color: transparent; } body::-webkit-scrollbar-thumb { border-radius: 10px; background-color: rgba(27, 30, 50, 0.3); } ",frames["solitics-iframe-popup"].document.head.appendChild(i)}}function initPopupSetting(){if($solitics_initModal(),$solitics.socketDetails.popup.position&&$solitics.popupModals.modal_content&&$solitics.popupModals.modal_content.classList&&($solitics.popupModals.modal_content.classList.remove("center","left","right","top-right","top-left","bottom-right","bottom-left"),$solitics.popupModals.modal_content.classList.add($solitics.socketDetails.popup.position)),$solitics.socketDetails.popup.theme&&$solitics.socketDetails.popup.theme.deviceToPopupTheme)switch(getUserDevice()){case"mobile":$solitics_fillPopUpByTheme($solitics.socketDetails.popup.theme.deviceToPopupTheme.mobile,"mobile");break;case"tablet":$solitics_fillPopUpByTheme($solitics.socketDetails.popup.theme.deviceToPopupTheme.tablet,"tablet");break;default:$solitics_fillPopUpByTheme($solitics.socketDetails.popup.theme.deviceToPopupTheme.desktop,"desktop")}}function $solitics_fillPopUpByTheme(t,o){var i;if($solitics_initModal(),t.size>0&&($solitics.popupModals.modal_content.style.width=t.isFixedSize?t.size+"px":t.size+"%"),t.backdrop&&!t.backdrop.enabled?$solitics.popupModals.modal.style.backgroundColor="unset":t.backdrop&&t.backdrop.enabled&&($solitics.popupModals.modal.style.backgroundColor="rgba(0, 0, 0,"+t.backdrop.value/100+")"),t.border){var s=t.border.width?t.border.width+"px solid":"0px solid",e=t.border.color?t.border.color:"none";$solitics.popupModals.modal_content.style.border=s+e,i=e}t.border.radius&&($solitics.popupModals.modal_content.style.borderRadius=t.border.radius+"px"),t.exitButton&&!t.exitButton.enabled?$solitics.popupModals.closeButton.style.display="none":t.exitButton&&t.exitButton.enabled&&t.exitButton.inside?($solitics.popupModals.closeButton.style.top="unset",$solitics.popupModals.closeButton.style.marginTop="0px",$solitics.popupModals.closeButton.style.marginRight="0px",$solitics.popupModals.closeButton.style.color=t.exitButton.color?t.exitButton.color:"inherit",$solitics.popupModals.closeButton.style.border=t.exitButton.border?"2px solid":"none",$solitics.popupModals.closeButton.style.display="inline-block",$solitics.popupModals.closeButton.style.fontSize=t.exitButton.size?t.exitButton.size+"px":"14px"):($solitics.popupModals.closeButton.style.display="inline-block",$solitics.popupModals.closeButton.style.color=t.exitButton.color?t.exitButton.color:"inherit",$solitics.popupModals.closeButton.style.border=i&&t.exitButton.border?"2px solid"+i:"none",$solitics.popupModals.closeButton.style.fontSize=t.exitButton.size?t.exitButton.size+"px":"14px"),t.background&&!t.background.enabled&&t.background.color?$solitics.popupModals.modal_content.style.backgroundColor=t.background.color:t.background&&t.background.enabled&&($solitics.popupModals.modal_content.style.backgroundColor="#fff"),t.background&&t.background.shadow&&t.background.shadow.enabled?$solitics.popupModals.modal_content.style.boxShadow="0 3px 9px rgba(0, 0, 0, 0.5)":$solitics.popupModals.modal_content.style.boxShadow="none",$solitics.socketDetails.popup.theme.closeOnBackgroundClick&&($solitics.popupModals.modal.setAttribute("data-keyboard","false"),$solitics.popupModals.modal.setAttribute("data-backdrop","static")),$solitics.socketDetails.popup.theme&&!$solitics.socketDetails.popup.theme.blockOtherActivityOnDisplay&&updatePositionAsNotification();var l=t.border.radius;switch(o){case"mobile":l-=4;break;case"tablet":l-=2;break;case"desktop":l-=1}$solitics.popupModals.iframe.style.borderRadius=l+"px"}function updatePositionAsNotification(){document.getElementById("solitics-popup-maker").style.width="0",$solitics.popupModals.modal_content.style.position="relative";var t=document.body.clientWidth-parseInt($solitics.popupModals.modal_content.style.width.replace("px","").replace("%","")),o=document.documentElement.clientHeight-$solitics.popupModals.modal_content.clientHeight;switch($solitics.socketDetails.popup.position){case"bottom-right":$solitics.popupModals.modal_content.style.left=t+"px",$solitics.popupModals.modal_content.style.top=o+"px",$solitics.popupModals.modal_content.style.transform="translate(0, 0)";break;case"bottom-left":$solitics.popupModals.modal_content.style.left="0",$solitics.popupModals.modal_content.style.top=o+"px",$solitics.popupModals.modal_content.style.transform="translate(0, 0)";break;case"top-left":$solitics.popupModals.modal_content.style.left="0",$solitics.popupModals.modal_content.style.top="0",$solitics.popupModals.modal_content.style.transform="translate(0, 0)";break;case"top-right":$solitics.popupModals.modal_content.style.left=t+"px",$solitics.popupModals.modal_content.style.top="0",$solitics.popupModals.modal_content.style.transform="translate(0, 0)";break;case"right":$solitics.popupModals.modal_content.style.left=t+"px",$solitics.popupModals.modal_content.style.top="55%",$solitics.popupModals.modal_content.style.transform="translate(0, 0)";break;case"left":$solitics.popupModals.modal_content.style.left="0",$solitics.popupModals.modal_content.style.top="55%",$solitics.popupModals.modal_content.style.transform="translate(0, 0)";break;default:$solitics.popupModals.modal_content.style.left=t/2+"px",$solitics.popupModals.modal_content.style.top="55%",$solitics.popupModals.modal_content.style.transform="translate(-10%, -50%)"}}function $solitics_emit_withId(t,o,i,s){var e,l=localStorage.SOLITICS_CONFIGURATION;l&&($solitics.solitics_configuration=JSON.parse(l)),e="string"==typeof s?JSON.parse(s):s,$solitics.solitics_configuration&&$solitics_transaction($solitics.solitics_configuration.brand,$solitics.solitics_configuration.memberId,$solitics.solitics_configuration.email,t,o,i,e)}function $solitics_emit(t,o,i,s){var e,l=localStorage.SOLITICS_CONFIGURATION;l&&($solitics.solitics_configuration=JSON.parse(l)),e="string"==typeof i?JSON.parse(i):i,$solitics.solitics_configuration&&$solitics_transaction($solitics.solitics_configuration.brand,$solitics.solitics_configuration.memberId,$solitics.solitics_configuration.email,null,t,o,e,s)}function $solitics_onPageEnter(t,o){var i;(i="string"==typeof o?JSON.parse(o):o)||(i={}),i.page=t,$solitics_beforeTransaction("PAGE_ENTER",i)}function $solitics_onPageLeave(t,o){var i;(i="string"==typeof o?JSON.parse(o):o)||(i={}),i.page=t,$solitics_beforeTransaction("PAGE_LEAVE",i)}function $solitics_onClick(t,o){var i;(i="string"==typeof o?JSON.parse(o):o)||(i={}),i.buttonName=t,$solitics_beforeTransaction("BUTTON_CLICK",i)}function $solitics_optinToPromotion(t,o,i){var s=new XMLHttpRequest;s.open("POST",$solitics.onlineApiDetails.optinUrl,!0),s.setRequestHeader("Content-Type","application/json;charset=UTF-8"),s.onreadystatechange=function(){4===s.readyState&&200===s.status?o&&o(this):4===s.readyState&&i&&i(this)};try{s.send(t)}catch(t){console.log(t)}}function $solitics_clickPopup(t,o){if($solitics_isValidRequestPopup()){var i=new XMLHttpRequest,s=$solitics.onlineApiDetails.popupUrl+"/"+$solitics.socketDetails.popup.webhookParams.subscriberId+"/"+$solitics.socketDetails.popup.webhookParams.promotion_id+"/"+$solitics.socketDetails.popup.webhookParams.content_id+"/POPUP/ESP_CLICK";i.open("POST",s,!0),i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),i.onreadystatechange=function(){4===i.readyState&&200===i.status?t&&t(this):4===i.readyState&&o&&o(this)};try{i.send()}catch(t){console.log(t)}}}function $solitics_hidePopup(){$solitics_clearPopupContent()}function $solitics_setPreDisplayPopup(t){$solitics.configSetting.callback=t}function $solitics_cancelCurrentPopup(){$solitics.configSetting.isCancelCurrentPopup=!0}function $solitics_onAutoPageChange(t,o,i){var s={page:o};i&&(s.fullUrl=i),$solitics_beforeTransaction(t,s),$solitics.solitics_configuration&&$solitics.solitics_configuration.popuptoken&&$solitics.solitics_configuration.hashedSubscriberId&&$solitics_init_popup($solitics.solitics_configuration.popuptoken)}function guid(){const t=()=>Math.floor(65536*(1+Math.random())).toString(16).substring(1);return`${t()}${t()}-${t()}-${t()}-${t()}-${t()}${t()}${t()}`}function $solitics_beforeTransaction(t,o){var i=localStorage.SOLITICS_CONFIGURATION;i&&($solitics.solitics_configuration=JSON.parse(i)),$solitics.solitics_configuration&&$solitics_transaction($solitics.solitics_configuration.brand,$solitics.solitics_configuration.memberId,$solitics.solitics_configuration.email,null,t,0,o)}function $solitics_getQueueValue(t){var o=null;try{var i=localStorage.getItem(t);o=JSON.parse(i)}catch(t){}return o}function $solitics_getTransactionsQueueValue(){var t=$solitics_getQueueValue("TRANSACTIONS_QUEUE_NAME");return t||{}}document.addEventListener("click",(function(t){var o=t.target.closest("#solitics-popup-maker");o&&$solitics.socketDetails&&$solitics.socketDetails.popup&&$solitics.socketDetails.popup.theme&&!$solitics.socketDetails.popup.theme.closeOnBackgroundClick?t.stopPropagation():o&&$solitics.socketDetails&&$solitics.socketDetails.popup&&$solitics.socketDetails.popup.theme&&$solitics.socketDetails.popup.theme.closeOnBackgroundClick&&$solitics.hidePopup()}));var transactionsStorageUpdatedHandler=function(t){var o=$solitics_getTransactionsQueueValue(),i=Object.keys(o);if(i.length>0){var s=o[i[0]];s&&$solitics_sendTransaction(s.params,s.guid)}};function removeTransactionFromQueue(t){var o=null;try{(o=!!$solitics.transactions[t])&&(delete $solitics.transactions[t],localStorage.TRANSACTIONS_QUEUE_NAME=JSON.stringify($solitics.transactions),transactionsStorageUpdatedHandler())}catch(t){}return o}function $solitics_isValidRequestPopup(){var t=$solitics.socketDetails.popup.webhookParams.subscriberId,o=$solitics.socketDetails.popup.webhookParams.promotion_id,i=$solitics.socketDetails.popup.webhookParams.content_id,s=!!t&&!!o&&!!i;return t||(s=!1),o||(s=!1),i||(s=!1),s}function $solitics_isValidRequest(t,o,i,s){return!!t&&!!s}function $solitics_fetchLastTransactionIfExist(){if(localStorage.TRANSACTIONS_QUEUE_NAME&&"{}"!==localStorage.TRANSACTIONS_QUEUE_NAME){var t=JSON.parse(localStorage.TRANSACTIONS_QUEUE_NAME);if(t){var o=Object.keys(t)[0];$solitics.transactions[o]=t[o]}}}function $solitics_logTransactionInLocalStorage(t){var o={guid:guid(),params:t,status:"request",date:new Date};$solitics.transactions[o.guid]=o,$solitics_fetchLastTransactionIfExist(),localStorage.TRANSACTIONS_QUEUE_NAME=JSON.stringify($solitics.transactions),transactionsStorageUpdatedHandler()}function $solitics_reconnect(t,o){var i=1,s=setInterval((function(){i==$solitics.intervalSetting.attempts||$solitics.solitics_configuration&&$solitics.solitics_configuration.hashedSubscriberId?($solitics.intervalSetting.enabled=!1,clearInterval(s)):($solitics_sendTransaction(t,o),i++)}),$solitics.intervalSetting.milliseconds)}function $solitics_loginTransaction(t,o,i){if(t.email){const o=JSON.parse(localStorage.SOLITICS_ANONYMOUS||"{}");o.anonymousUserIds&&!o.hashedSubscriberId&&(t.anonymousUserIds=o.anonymousUserIds)}else delete t.email;var s=new XMLHttpRequest;function e(){removeTransactionFromQueue&&removeTransactionFromQueue(o)}s.open("POST",$solitics.onlineApiDetails.loginUrl,!0),s.setRequestHeader("Content-Type","application/json;charset=UTF-8"),s.onreadystatechange=function(){if(4===s.readyState)switch(!0){case 200===s.status:$solitics.isLogin=!0,$solitics_handleResponse(s,t,o);break;case 406===s.status:"Member does not exist"===s.responseText?(l=[2,5,10,15,20,30,60,60,60,60],$solitics.intervalSetting.loginAttempts||=0,$solitics.intervalSetting.loginAttempts++,$solitics.intervalSetting.loginAttempts<=l.length&&setTimeout((function(){$solitics_sendTransaction(t,o,i)}),1e3*l[$solitics.intervalSetting.loginAttempts-1])):e();break;default:e()}var l};try{s.send(JSON.stringify(t))}catch(t){console.log(t)}}function $solitics_sendTransaction(t,o,i){if($solitics_isNotIdle()||$solitics_openWebSocket(!0),"LOGIN"===t.transactionType)$solitics_loginTransaction(t,o,i);else{var s=new XMLHttpRequest;s.open("POST",$solitics.onlineApiDetails.url,!0),s.setRequestHeader("Content-Type","application/json;charset=UTF-8"),s.onreadystatechange=function(){if(4===s.readyState&&200===s.status)$solitics_handleResponse(s,t,o);else if(4===s.readyState)if("string"==typeof s.responseText&&406==s.status){JSON.parse(s.responseText);removeTransactionFromQueue&&removeTransactionFromQueue(o)}else $solitics.intervalSetting.enabled||($solitics.intervalSetting.enabled=!0,$solitics_reconnect(t,o))};try{s.send(JSON.stringify(t))}catch(t){console.log(t)}}}function $solitics_handleResponse(t,o,i){if("LOGIN"===o.transactionType&&o.email){const o=JSON.parse(t.responseText);if(o.hasOwnProperty("hashedSubscriberId")){const t=JSON.parse(localStorage.SOLITICS_ANONYMOUS||"{}");t.hashedSubscriberId=o.hashedSubscriberId,localStorage.SOLITICS_ANONYMOUS=JSON.stringify(t)}}$solitics.idleSetting.lastTransaction=new Date,$solitics.isLogin&&($solitics_setResponseData(o,t),$solitics.solitics_configuration&&t&&t.responseText&&$solitics.solitics_configuration.popuptoken&&$solitics.solitics_configuration.hashedSubscriberId&&$solitics_init_popup($solitics.solitics_configuration.popuptoken)),removeTransactionFromQueue&&removeTransactionFromQueue(i)}function $solitics_setResponseData(t,o){let i=JSON.parse(o.responseText);t&&o&&"LOGIN"===t.transactionType&&(i.hasOwnProperty("heartbeatEnabled")||i.hasOwnProperty("hashedSubscriberId"))?(i.hasOwnProperty("heartbeatEnabled")&&($solitics.solitics_configuration.heartbeatEnabled=i.heartbeatEnabled),i.hasOwnProperty("hashedSubscriberId")&&($solitics.solitics_configuration.hashedSubscriberId=i.hashedSubscriberId),$solitics_doHeartbit()):$solitics.solitics_configuration.hashedSubscriberId=o.responseText,localStorage.SOLITICS_CONFIGURATION=JSON.stringify($solitics.solitics_configuration)}function $solitics_doHeartbit(){if($solitics.solitics_configuration.heartbeatEnabled&&$soliticsHeartbit){let t={memberId:$solitics.solitics_configuration.memberId,brand:$solitics.solitics_configuration.brand,keyType:$solitics.solitics_configuration.keyType,keyValue:$solitics.solitics_configuration.keyValue};$solitics.solitics_configuration.branch&&(t.branch=$solitics.solitics_configuration.branch),$soliticsHeartbit.getHeartbitMode(t)}}function $solitics_transaction(t,o,i,s,e,l,n,c){if($solitics_isValidRequest(t,o,i,e)){var a={brand:t,token:t,memberId:o,email:i,transactionId:s||guid(),transactionType:e,transactionAmount:l||0};n&&(a.customFields=JSON.stringify(n).toString()),$solitics.solitics_configuration.branch&&(a.branch=$solitics.solitics_configuration.branch),$solitics.solitics_configuration.keyType&&$solitics.solitics_configuration.keyValue&&(a.keyType=$solitics.solitics_configuration.keyType,a.keyValue=$solitics.solitics_configuration.keyValue),$solitics_logTransactionInLocalStorage(a)}}function locationHashChanged(){$solitics_onAutoPageChange("AUTO_PAGE_CHANGE",location.host+location.pathname,location.href)}function $solitics_init_internal(){$solitics.solitics_configuration&&$solitics.solitics_configuration.hashedSubscriberId&&$solitics.solitics_configuration.popuptoken&&$solitics_openWebSocket()}function onLoadPage(){$solitics_init_internal(),$solitics_onAutoPageChange("AUTO_PAGE_CHANGE",location.host+location.pathname,location.href)}function reconnect(){$solitics.socketDetails.ws&&$solitics.socketDetails.ws.close&&($solitics.socketDetails.ws.close(),$solitics.socketDetails.isConnecting=!1),$solitics.idleSetting.lastTransaction=new Date,$solitics_openWebSocket(!0)}locationHashChanged(),onLoadPage(),window.unload=function(t){$solitics_onLogout()},window.addEventListener("mousemove",(function(t){$solitics.idleSetting&&($solitics.idleSetting.lastTransaction=new Date)})),window.addEventListener("resize",(function(t){$solitics.socketDetails.popup&&$solitics.socketDetails.popup.theme&&!$solitics.socketDetails.popup.theme.blockOtherActivityOnDisplay&&updatePositionAsNotification()}),!0);var pushreg=document.createElement("script");pushreg.src="https://d2afn796dyftlg.cloudfront.net/pushreg.min.js",document.head.appendChild(pushreg);var heartbit=document.createElement("script");heartbit.src="https://d2afn796dyftlg.cloudfront.net/oapi-heartbit.min.js",document.head.appendChild(heartbit);
